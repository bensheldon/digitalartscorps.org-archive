<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr">
<head>
	<title>Drupal &quot;Hacks&quot; | Digital Arts Service Corps</title>
	
	<link rel="stylesheet" href="../sites/digitalartscorps.org/themes/nostalgiacorps/reset.css" type="text/css" media="all" />
	
	<link type="text/css" rel="stylesheet" media="all" href="../modules/book/book.css%3Fs.css" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/node/node.css%3Fs.css" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/defaults.css%3Fs.css" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system.css%3Fs.css" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/system/system-menus.css%3Fs.css" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/user/user.css%3Fs.css" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/cck/theme/content-module.css%3Fs.css" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/filefield/filefield.css%3Fs.css" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/tagadelic/tagadelic.css%3Fs.css" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/typogrify/typogrify.css%3Fs.css" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/forum/forum.css%3Fs.css" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/all/modules/cck/modules/fieldgroup/fieldgroup.css%3Fs.css" />
<link type="text/css" rel="stylesheet" media="all" href="../modules/comment/comment.css%3Fs.css" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/digitalartscorps.org/themes/nostalgiacorps/reset.css%3Fs.css" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/digitalartscorps.org/themes/nostalgiacorps/960.css%3Fs.css" />
<link type="text/css" rel="stylesheet" media="all" href="../sites/digitalartscorps.org/themes/nostalgiacorps/style.css%3Fs.css" />
	
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../sites/digitalartscorps.org/files/favicon_2.ico" type="image/x-icon" />
	
	<script type="text/javascript" src="../misc/jquery.js%3Fs"></script>
<script type="text/javascript" src="../misc/drupal.js%3Fs"></script>
<script type="text/javascript">
<!--//--><![CDATA[//><!--
jQuery.extend(Drupal.settings, { "basePath": "/", "googleanalytics": { "trackOutgoing": 1, "trackMailto": 1, "trackDownload": 1, "trackDownloadExtensions": "7z|aac|avi|csv|doc|exe|flv|gif|gz|jpe?g|js|mp(3|4|e?g)|mov|pdf|phps|png|ppt|rar|sit|tar|torrent|txt|wma|wmv|xls|xml|zip" } });
//--><!]]>
</script>
	
	<style type="text/css">
		img, div, a, input { behavior: url(http://digitalartscorps.org/node/iepngfix.htc) }
	</style>	

	<script language="javascript" type="text/javascript" src="../sites/digitalartscorps.org/themes/nostalgiacorps/js/jquery.flow.1.2.auto&#32;2.js"></script>
	<script language="javascript" type="text/javascript" src="../sites/digitalartscorps.org/themes/nostalgiacorps/js/iepngfix_tilebg.js"></script>
	<script language="javascript" type="text/javascript" src="../sites/digitalartscorps.org/themes/nostalgiacorps/js/newsSlider.js"></script>

</head>

<body>
	
	<!-- Navigation -->
		<div id="top">
		<div id="topContent">
			<div class="container_16" id="bigNav">
				<div class="navItem grid_4 siteLogo">	
					<a href="../index.html">
						<img  class="grid_4" src="../sites/digitalartscorps.org/themes/nostalgiacorps/images/logo.png" alt="Logo" />
					</a>
					<div id="siteMission">
						<p>"building the capacity of public media and technology organizations"</p>
					</div>

				</div>
				
				<div class="navItem grid_2">		
					<a href="../corps/current.html">		
						<img  src="../sites/digitalartscorps.org/themes/nostalgiacorps/images/nav_CurrentCorps.png" width="100">
						<p>Current Corps</p>
					</a>
				</div>
				<div class="navItem grid_2">
					<a href="../benefits.html">			
						<img  src="../sites/digitalartscorps.org/themes/nostalgiacorps/images/nav_Report.png" width="100" >
						<p>Benefits &amp; More</p>
					<a href="http://digitalartscorps.org/node/index.php?section=benefits">
				</a>
				</div>
				<div class="navItem grid_2">		
					<a href="../field-reports.html">
							<img  src="../sites/digitalartscorps.org/themes/nostalgiacorps/images/nav_fieldReport.png" width="100">
							<p>Field Reports</p>
					</a>
				</div>
				<div class="navItem grid_2">		
					<a href="../corps/alumni.html">
						<img  src="../sites/digitalartscorps.org/themes/nostalgiacorps/images/nav_AlumniCorps2.png" width="100">
						<p>Alumni Corps</p>
					</a>
				</div>
				<div class="navItem grid_2">		
					<a href="../wiki.html">
						<img  src="../sites/digitalartscorps.org/themes/nostalgiacorps/images/nav_Wiki2.png" width="100">
						<p>The Wiki</p>
					</a>
				</div>
				<div class="navItem grid_2">		
					<a href="../contact.html">
						<img  src="../sites/digitalartscorps.org/themes/nostalgiacorps/images/nav_contact2.png" width="100">
						<p style="margin-top: -5px;">Contact Us</p>
				</a>
				</div>
			</div>
		</div>
	</div>
	
	<div class="clear"></div>
	<div id="navContent" class="container_16">
		<div id="topContentNav">
			<div id="emboss"></div>
			<img src="../sites/digitalartscorps.org/themes/nostalgiacorps/images/star.png" width="90px">
			<p id="login"><a href="../user.html">log-in</a></p>
			
		</div>
	</div>	
	
		
	<div id="middleContent" class="container_16">
	
		 
		
		 
	
		<div id="posts" >
			
						
						
<div id="node-757" class="post node node-field_report ">
		<div class="post-metadata grid_6">
			<div class="picture">
  <a href="../user/966.html" title="View user profile."><img src="../sites/digitalartscorps.org/files/imagecache/profile_thumb/files/profile-anon.png" alt="Matthew Isaacs&#039;s picture" title="Matthew Isaacs&#039;s picture"  width="100" height="100" /></a></div>
			<a href="../user/966.html">Matthew Isaacs</a><br />
			Champaign-Urbana Community Wireless Network <br />
			<em>, </em>
		</div>
		<div class="post-content grid_10">
							 		<div class="metadata-date grid_6 alpha"><strong>May 8, 2007 - 10:39pm</strong></div>
			 		<div class="metadata-comments grid_3 omega"><strong>1 comment</strong></div>
			 		<div class="clear"></div>
			 			
			<div class="post-content-inner"?>
			 	<a href="757.html" title="Drupal &quot;Hacks&quot;" rel="bookmark"><h1>Drupal &quot;Hacks&quot;</h1></a>
			 	<h2>Categories: <ul class="links inline"><li class="taxonomy_term_29 first"><a href="../taxonomy/term/29.html" rel="tag" title="">drupal</a></li>
<li class="taxonomy_term_12 last"><a href="../taxonomy/term/12.html" rel="tag" title="">webdesign</a></li>
</ul></h2>			 	
			 	<div class="post-content-text">
				<p>As part of the website redesign, we&#39;re adding new sections for user generated content.  We needed to keep this content separate from the rest of the site, so that any user could edit the user sections, but not the rest of the site.  For basic content types, this is simply a matter of defining a new content type based on the standard drupal &quot;node&quot;, and then assigning the correct permissions to that new type.  But what if you want to do something similar to a more advanced content-type such as a book?  One could extend the book module to support a similar derived content feature (best solution).  But that can take a fair amount of time, and with no guarantee of changes being accepted upstream, you face the possibility of either running outdated module code, or having to reapply your edits for every update.  A quicker, and much simpler method, especially for those with little programming experience, is to make a few, essentially cosmetic changes to the book module.  These changes consist primarily of changed the names of the tables the module stores its data in, and the internal name that drupal uses to identify the module and its components.  And while your modifying, you can easily alter the human-readable names and descriptions.  And its all as easy as Find &amp; Replace.   </p>
<p>The Easy Way: </p>
<p>One should make a backup copy of the books module.  I would suggest creating a new directory, name it after the short, drupal id form of the content type, and place the files from the book module in this directory.  Renaming them would be a good idea too.  Then do the following in all of those files. </p>
<p>One could easily do a &quot;Replace all&quot; on &quot;book&quot; and &quot;Book&quot; with the words/identifiers you desire.  Caveats:  the word replacing book cannot have spaces, and should not have other odd characters; not starting with a number would be advisable as well.  A short word or acronym or other identifier would be preferred here.  The reason for this is that in some places &quot;book&quot; is being used as an identifier by Drupal, and so we must make sure that what we use will not cause the PHP or SQL to break.  In our case, we replaced it with &quot;cnrc&quot;, since this new book will be used to provide books and book pages for the Community Networking Resource Center area of the new website.  &quot;Book&quot; is used only in description and such, and is not used internally by Drupal.  As such, we can replace it with whatever we want.  Just be careful of including quotation marks, either single or double, as they could be misinterpreted by PHP.  In our case we replaced it with the expanded acronym.  The plural of &quot;book&quot; and &quot;Book&quot; are sometimes used as well.  The process described above will replace the appropriate portions of these words, thus leaving the replacements with an &quot;s&quot; suffix.  If this is undesirable, use either a &quot;match only whole word&quot; feature, or replace the plural forms first. </p>
<p>Whats Really Going On:</p>
<p> The .info file included with module contains the data that is displayed in the &quot;Modules&quot; section of the admin screens.  Its not important to change it, but doing so will make your life (or however assumes job of maintaining the site&#39;s life) a lot easier.   The fields here can contain pretty much any value.</p>
<p>The .install file contains the code responsible for installing and uninstalling the module.  Its what makes the correct tables in the database, for instance.  To truly keep the data from the various &quot;book&quot; modules separate, we need to make our module use a different table.  The requires editing the sql queries encapsulated in the PHP.  I also suggest renaming the function as well.  Not only does it improve clarity, it prevents naming collisions.  Drupal, at least as far as I&#39;ve seen, runs in one big namespace.  Hence, all modules must provide unique function names.  The convention is to prefix the functions with the modules short (internal drupal) name.</p>
<p> The .module file contains all the internal workings of the module.  The same thing about function names applies here as in the .install file.  the *_node_info function contains the base parameters (drupal name,verbose name, and description).  The variables whose values are wrapped in t(&#39; &#39;) will accept Unicode characters.  the &quot;module&quot; variable will not.  In here the paths and such are defined as well.  The find &amp; replace method will modify these as well, thus allowing one to customize the url locations.</p>
<p>Motivation and Alternatives:</p>
<p>The redesign of the site presented us with a case wherein we might have books that only staff should be able to edit, and other books that should be open to the general public.  With the current book module, that is not possible.  I suspect one may be able to achieve similar functionality with the CCk for Drupal 5, however, I haven&#39;t had time to explore it yet.  Given my programming background, I found modifying the module much simpler than learning the quirks of a Drupal interface.  </p>
<p>&nbsp;</p>
				
				
				
				<hr /><div id="comments">
  <a id="comment-345"></a>
<div class="comment comment-published">
  <p>Comment from <a href="../user/966.html" title="View user profile.">Matthew Isaacs</a> on May 9, 2007 - 12:19pm</p>
  <div class="comment-metadata grid_2">
  	<div class="picture">
  <a href="../user/966.html" title="View user profile."><img src="../sites/digitalartscorps.org/files/imagecache/profile_thumb/files/profile-anon.png" alt="Matthew Isaacs&#039;s picture" title="Matthew Isaacs&#039;s picture"  width="100" height="100" /></a></div>
  </div>

  <div class="comment-content grid_7 omega">
  	<div class="comment-content-inner">
	    <p>I found a module this morning that looks like it will provide this missing access control functionality to the book content type.  See <a href="http://drupal.org/project/bookexpand" title="http://drupal.org/project/bookexpand">http://drupal.org/project/bookexpand</a> for more info.  It just came out today, however.</p>
	    
	         </div>
  </div>
  <div class="clear"></div>
</div></div>
				
								</div>
		</div>
	</div>
	

<div class="clear"></div>
</div>
<div id="comments">
  <a id="comment-345"></a>
<div class="comment comment-published">
  <p>Comment from <a href="../user/966.html" title="View user profile.">Matthew Isaacs</a> on May 9, 2007 - 12:19pm</p>
  <div class="comment-metadata grid_2">
  	<div class="picture">
  <a href="../user/966.html" title="View user profile."><img src="../sites/digitalartscorps.org/files/imagecache/profile_thumb/files/profile-anon.png" alt="Matthew Isaacs&#039;s picture" title="Matthew Isaacs&#039;s picture"  width="100" height="100" /></a></div>
  </div>

  <div class="comment-content grid_7 omega">
  	<div class="comment-content-inner">
	    <p>I found a module this morning that looks like it will provide this missing access control functionality to the book content type.  See <a href="http://drupal.org/project/bookexpand" title="http://drupal.org/project/bookexpand">http://drupal.org/project/bookexpand</a> for more info.  It just came out today, however.</p>
	    
	         </div>
  </div>
  <div class="clear"></div>
</div></div>
		</div>
		
				<div class="clear"></div>
	
	</div>

	

	<!-- Footer -->
		<div id="bottom">
		<div id="bottomContent" class="container_16">
			<div id="logos">
				<a href="http://www.umb.edu/"><img src="../sites/digitalartscorps.org/themes/nostalgiacorps/images/umassLogo.png" height="50"></a>
				<a href="http://www.nationalservice.gov/"><img src="../sites/digitalartscorps.org/themes/nostalgiacorps/images/cncsLogo.jpg" height="50"></a>
				<a href="http://transmissionproject.org/"><img src="../sites/digitalartscorps.org/themes/nostalgiacorps/images/transmissionLogo.png" height="50"></a>
			</div>
			<div id="bottomNav">
				<p>
				<a href="http://digitalartscorps.org/node/index.php?section=home">Home</a> | 
				<a href="http://digitalartscorps.org/node/index.php?section=corp">Current Corps</a> | 
				<a href="http://digitalartscorps.org/node/index.php?section=feildReports">Field Reports</a> | 
				<a href="http://digitalartscorps.org/node/index.php?section=alumni">Alumni Corps</a> | 
				<a href="http://digitalartscorps.org/node/index.php?section=wiki">The Wiki</a> | 
				<a href="http://digitalartscorps.org/node/index.php?section=benefits">Benefits</a> | 
				<a href="http://digitalartscorps.org/node/index.php?section=contact">Contact</a>
				</p>
				<p>(617) 287-7122 | <a href="../index.html">info@digitalartscorps.org</a></p>
			</div>
		</div>
				<div class="clear"></div>

	</div>

<script type="text/javascript" src="../sites/all/modules/google_analytics/googleanalytics.js%3Fs"></script>
<script type="text/javascript">
<!--//--><![CDATA[//><!--
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
//--><!]]>
</script>
<script type="text/javascript">
<!--//--><![CDATA[//><!--
try{var pageTracker = _gat._getTracker("UA-10013464-2");pageTracker._trackPageview();} catch(err) {}
//--><!]]>
</script>
</body>
</html>